<head th:replace="~{header :: head}"/>

<body>

<div th:replace="~{navbar :: nav}"/>
<div th:replace="~{navbar :: nav2}"/>

	<div class="container special">
		<h2 class="h2">Liste des Ordonnances</h2>
		<div class="table-responsive">
			<table class="table table-striped table-sm">
				<thead>
					<tr>
						<th>Numéro de l'Ordonnance</th>
						<th>Date de l'Ordonnance</th>
						<th>Medecin</th>
						<th>Specialiste</th>
						<th>Client</th>
					</tr>
				</thead>
				<tbody>
					<tr th:if="${listOrdonnance.empty}">
						<td colspan="3">Aucune Ordonnance en base de données</td>
					</tr>
					<tr th:each="ordonnance: ${listOrdonnance}">
						<td><span th:text="${ordonnance.Ord_Num}"> Numéro de l'Ordonnance </span></td>
						<td><span th:text="${ordonnance.Ord_Date}"> Date </span></td>
						<td><span th:text="Dr +' '+${ordonnance.Medecin.Personne.Per_Prenom} + ' ' + ${ordonnance.Medecin.Personne.Per_Nom}"> Medecin </span></td>
						<td><span th:text="${ordonnance?.Specialiste?.Personne?.Per_Prenom}"> Spécialiste </span></td>
						<td><span th:text="${ordonnance.Client.Personne.Per_Prenom} + ' ' + ${ordonnance.Client.Personne.Per_Nom}"> Client </span></td>
						<td>
							<!-- Button trigger modal -->
							<button type="button" class="btn btn-primary"
									data-bs-toggle="modal" th:attr="data-bs-target=${'#editModalOrd'+ ordonnance.Ord_ID}"
									data-row="${ordonnance}">Informations </button>

							<!-- Modal -->
							<div class="modal fade" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true" th:each="ordonnance : ${listOrdonnance}" th:attr="id=${'editModalOrd' + ordonnance.Ord_ID}">
								<div class="modal-dialog">
									<div class="modal-content">
										<div class="modal-header">
											<h1 class="modal-title fs-5" id="exampleModalLabel">Ordonnances</h1>
											<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
										</div>
										<div class="modal-body">
											<span th:text="${ordonnance.Ord_Num}"> Numéro de l'Ordonnance </span>
											<span th:text="${ordonnance.Ord_Date}"> Date </span>
											<span th:text="Dr +' '+${ordonnance.Medecin.Personne.Per_Prenom} + ' ' + ${ordonnance.Medecin.Personne.Per_Nom}"> Medecin </span>
											<span th:text="${ordonnance?.Specialiste?.Personne?.Per_Prenom}"> Spécialiste </span>
											<span th:text="${ordonnance.Client.Personne.Per_Prenom} + ' ' + ${ordonnance.Client.Personne.Per_Nom}"> Client </span>

											Informations concernant les médicaments concernés aussi. (A rajouter)

										</div>

										<div class="modal-footer">
											<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fermer</button>
										</div>
									</div>
								</div>
							</div>

							<a th:href="@{/editOrdonnance/{id}(id=${ordonnance.Ord_ID})}"><button class="btn btn-info">Modifier</button></a>
							<a th:href="@{/deleteOrdonnance/{id}(id=${ordonnance.Ord_ID})}"><button class="btn btn-danger">Supprimer</button></a>						
						</td>
					</tr>
				</tbody>
			</table>
		</div>
		<h4><a th:href="@{/signupOrdonnance}">Ajouter une nouvelle Ordonnance</a></h4>

	</div>

	<script
		src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
	<script
		src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"
		integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa"
		crossorigin="anonymous"></script>
</body>
</html>